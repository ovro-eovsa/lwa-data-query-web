{% extends "base-fluid.html" %}
{% block title %}OVRO-LWA Solar{% endblock %}

{% block head %}
{% assets "example_css" %}
<link rel="stylesheet" href="{{ ASSET_URL }}" />
{% endassets %}
{% assets "example_js" %}
<script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %}

<!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Include Plotly -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="{{ url_for('static', filename='js/example.js') }}"></script>
<script type="text/javascript">
var isOvsa = {{ 'true' if hostname == 'ovsa' else 'false' }};
</script>

{% endblock %}

{% block container %}

<div class="d-flex align-items-center">
  <img src="{{ url_for('static', filename='images/ovrolwa_logo.png') }}" alt="OVSALWA Logo" width="50" height="50" class="mr-2">
  <img src="{{ url_for('static', filename='images/NJIT_logo.svg') }}" alt="NJIT Logo" width="80" height="80" class="mr-2">
  <h2>Query OVRO-LWA Solar Data Products</h2>
</div>


<form class="form-inline mt-2">
<!-- <form id="time-form" class="form-inline mt-2"> -->
  <div class="form-group mb-2">
    <label for="start">Time range:</label>
    <input type="text" placeholder="Start Time" class="form-control datetime-picker" id="start">
  </div>
  <div class="form-group mx-sm-3 mb-2">
    <input type="text" placeholder="End time" class="form-control datetime-picker" id="end">
  </div>
  <button type="submit" id="query-btn" class="btn btn-primary mb-2">Query</button>
</form>


<div class="mt-4">
  <h4>Data File List</h4>
  <div class="row text-center mb-2">
    <div class="col-sm-4">
      <h5>spec_fits</h5>
      <button id="download-spec" class="btn btn-outline-secondary btn-sm">Download Spec_fits.txt</button>
    </div>
    <div class="col-sm-4">
      <h5>image_lev1</h5>
      <button id="download-image-lev1" class="btn btn-outline-secondary btn-sm">Download image_lev1_hdf.txt</button>
    </div>
    <div class="col">
      <h5>image_lev15</h5>
      <button id="download-image-lev15" class="btn btn-outline-secondary btn-sm">Download image_lev15_hdf.txt</button>
    </div>
  </div>


  <div class="row">
    <div class="col-sm-4">
      <div id="spec-box" style="border: 1px solid #ccc; padding: 10px; max-height: 200px; overflow-y: auto;">
        <!-- <ul id="spec-list" class="list-unstyled mb-0"></ul> -->
        <ul id="spec-list" class="list-unstyled mb-0" style="font-size: 12px;"></ul>
      </div>
    </div>
    <div class="col-sm-4">
      <div id="image-lev1-box" style="border: 1px solid #ccc; padding: 10px; max-height: 200px; overflow-y: auto;">
        <ul id="image-lev1-list" class="list-unstyled mb-0" style="font-size: 12px;"></ul>
      </div>
    </div>
    <div class="col">
      <div id="image-lev15-box" style="border: 1px solid #ccc; padding: 10px; max-height: 200px; overflow-y: auto;">
        <ul id="image-lev15-list" class="list-unstyled mb-0" style="font-size: 12px;"></ul>
      </div>
    </div>
  </div>
</div>


<!-- Plotly plot will be inserted here by example.js -->
<div id="plot-container" class="mt-4" style="width: 90%; padding-left: 1rem;"></div>


<!-- Movie player -->
<!-- <div id="movie-container" class="mt-4" style="display: none;">
  <h4>Quicklook of Spectrogram and Slow Image Movie</h4>
     -->
<div id="movie-container" class="mt-4" style="display: none;">
  <div class="d-flex align-items-center gap-2 mb-2">
  <!-- <div class="d-flex justify-content-between align-items-center mb-2"> -->
    <h4 class="mb-0" style="margin-right: 2rem;">Quicklook of Spectrogram and Imaging Movie</h4>
    <div>
      <button id="minus1day" class="btn btn-sm btn-outline-primary mr-2">â€“1 Day</button>
      <button id="plus1day" class="btn btn-sm btn-outline-primary">+1 Day</button>
    </div>
  </div>

  <div class="d-flex flex-row align-items-start mt-3" style="gap: 16rem;">
    <!-- Spec image preview -->
    <div style="flex: 1;"><!-- margin-top: 1rem; -->
      <img id="spec-preview" src="" alt="Spec FITS Preview" style="max-width: 150%; height: auto; border: 1px solid #ccc;" />
      <p id="spec-message" class="text-muted mt-2" style="display: none;">No spec image found.</p>
    </div>

    <!-- Movie -->
    <div style="flex: 2;">
      <video id="movie-player" width="80%" controls>
        <source id="movie-player-source" src="" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p id="movie-message" class="text-muted mt-2" style="display: none;">No movie found for selected time range.</p>
    </div>

  </div>
</div>


{% endblock %}